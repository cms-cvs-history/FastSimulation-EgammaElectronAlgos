# $Id: pixelMatchElectronL1IsoLargeWindowSequenceForHLT.cff,v 1.1 2007/12/25 17:14:02 pjanot Exp $
# create a sequence with all required modules and sources needed to make
# pixel based electrons
#
# NB: it assumes that ECAL clusters (hybrid) are in the event
#
#

# modules to make seeds, tracks and electrons
include "RecoEgamma/EgammaHLTProducers/data/egammaHLTChi2MeasurementEstimatorESProducer.cff"

# Cluster-seeded pixel pairs
module l1IsoLargeWindowElectronPixelSeeds = electronGSPixelSeeds from "FastSimulation/EgammaElectronAlgos/data/electronGSPixelSeeds.cfi"
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.ePhiMin1=-0.035
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.ePhiMax1=0.020
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.pPhiMin1=-0.020
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.pPhiMax1=0.035
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.pPhiMin2=-0.002
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.pPhiMax2=0.002
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.ZMin1=-15.0
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.ZMax1=15.0
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.ZMin2=-0.1
replace l1IsoLargeWindowElectronPixelSeeds.SeedConfiguration.ZMax2=0.1

replace l1IsoLargeWindowElectronPixelSeeds.superClusterBarrelProducer = "correctedHybridSuperClustersL1Isolated"
replace l1IsoLargeWindowElectronPixelSeeds.superClusterEndcapProducer = "correctedEndcapSuperClustersWithPreshowerL1Isolated"

module ckfL1IsoLargeWindowTrackCandidates = trackCandidateProducer from "FastSimulation/Tracking/data/TrackCandidateProducer.cfi"
replace ckfL1IsoLargeWindowTrackCandidates.SeedProducer = l1IsoLargeWindowElectronPixelSeeds:
replace ckfL1IsoLargeWindowTrackCandidates.TrackProducer = ctfL1IsoWithMaterialTracks:
replace ckfL1IsoLargeWindowTrackCandidates.MaxNumberOfCrossedLayers = 999
replace ckfL1IsoLargeWindowTrackCandidates.SeedCleaning = false

# CTF track fit with material
module ctfL1IsoLargeWindowTracks = ctfWithMaterialTracks from "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
replace ctfL1IsoLargeWindowTracks.src = "ckfL1IsoLargeWindowTrackCandidates"
replace ctfL1IsoLargeWindowTracks.TTRHBuilder = "WithoutRefit"
replace ctfL1IsoLargeWindowTracks.Fitter = "KFFittingSmoother"
replace ctfL1IsoLargeWindowTracks.Propagator = "PropagatorWithMaterial"

module ctfL1IsoLargeWindowWithMaterialTracks = FastTrackMerger {

    VInputTag TrackProducers = { 
	ctfL1IsoLargeWindowTracks,
	ctfL1IsoWithMaterialTracks
    }

    untracked bool SaveTracksOnly = true

}

# Electron collection
include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronsL1IsoLargeWindowForHLT.cff"

sequence pixelMatchElectronL1IsoLargeWindowSequenceForHLT = {
    l1IsoLargeWindowElectronPixelSeeds
}

sequence pixelMatchElectronL1IsoLargeWindowTrackingSequenceForHLT = {
    ckfL1IsoLargeWindowTrackCandidates &
    ctfL1IsoLargeWindowTracks &
    ctfL1IsoLargeWindowWithMaterialTracks &
    pixelMatchElectronsL1IsoLargeWindowForHLT
}
