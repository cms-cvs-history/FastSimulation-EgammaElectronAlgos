# $Id: pixelMatchElectronL1NonIsoSequenceForHLT.cff,v 1.6.2.1 2008/04/25 10:01:34 pjanot Exp $
# create a sequence with all required modules and sources needed to make
# pixel based electrons
#
# NB: it assumes that ECAL clusters (hybrid) are in the event
#
#


# modules to make seeds, tracks and electrons
# include "RecoEgamma/EgammaHLTProducers/data/egammaHLTChi2MeasurementEstimatorESProducer.cff"

# Cluster-seeded pixel pairs
module hltL1NonIsoElectronPixelSeeds = electronGSPixelSeeds from "FastSimulation/EgammaElectronAlgos/data/electronGSPixelSeeds.cfi"
# include "RecoEgamma/EgammaHLTProducers/data/pixelSeedConfigurationsForHLT.cfi"
replace hltL1NonIsoElectronPixelSeeds.SeedConfiguration = { 
    # using l1NonIsoElectronPixelSeedConfiguration
    using block_hltL1NonIsoElectronPixelSeeds
}
replace hltL1NonIsoElectronPixelSeeds.superClusterBarrel = hltCorrectedHybridSuperClustersL1NonIsolated
replace hltL1NonIsoElectronPixelSeeds.superClusterEndcap = hltCorrectedEndcapSuperClustersWithPreshowerL1NonIsolated

module hltL1NonIsoStartUpElectronPixelSeeds = electronGSPixelSeeds from "FastSimulation/EgammaElectronAlgos/data/electronGSPixelSeeds.cfi"
replace hltL1NonIsoStartUpElectronPixelSeeds.SeedConfiguration = { 
    using block_hltL1NonIsoStartUpElectronPixelSeeds
}
replace hltL1NonIsoStartUpElectronPixelSeeds.superClusterBarrel = hltCorrectedHybridSuperClustersL1NonIsolated
replace hltL1NonIsoStartUpElectronPixelSeeds.superClusterEndcap = hltCorrectedEndcapSuperClustersWithPreshowerL1NonIsolated

# include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronsL1NonIsoForHLT.cff"

# CKFTrackCandidateMaker
module hltCkfL1NonIsoTrackCandidates = trackCandidateProducer from "FastSimulation/Tracking/data/TrackCandidateProducer.cfi"
replace hltCkfL1NonIsoTrackCandidates.SeedProducer = hltL1NonIsoElectronPixelSeeds:
replace hltCkfL1NonIsoTrackCandidates.TrackProducers = { }
replace hltCkfL1NonIsoTrackCandidates.MaxNumberOfCrossedLayers = 999
replace hltCkfL1NonIsoTrackCandidates.SeedCleaning = true

module hltCkfL1NonIsoStartUpTrackCandidates = trackCandidateProducer from "FastSimulation/Tracking/data/TrackCandidateProducer.cfi"
replace hltCkfL1NonIsoStartUpTrackCandidates.SeedProducer = hltL1NonIsoStartUpElectronPixelSeeds:
replace hltCkfL1NonIsoStartUpTrackCandidates.TrackProducers = { }
replace hltCkfL1NonIsoStartUpTrackCandidates.MaxNumberOfCrossedLayers = 999
replace hltCkfL1NonIsoStartUpTrackCandidates.SeedCleaning = true

# CTF track fit with material
module hltCtfL1NonIsoWithMaterialTracks = ctfWithMaterialTracks from "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
replace hltCtfL1NonIsoWithMaterialTracks.src = hltCkfL1NonIsoTrackCandidates
replace hltCtfL1NonIsoWithMaterialTracks.TTRHBuilder = "WithoutRefit"
replace hltCtfL1NonIsoWithMaterialTracks.Fitter = "KFFittingSmoother"
replace hltCtfL1NonIsoWithMaterialTracks.Propagator = "PropagatorWithMaterial"

module hltCtfL1NonIsoStartUpWithMaterialTracks = ctfWithMaterialTracks from "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
replace hltCtfL1NonIsoStartUpWithMaterialTracks.src = hltCkfL1NonIsoStartUpTrackCandidates
replace hltCtfL1NonIsoStartUpWithMaterialTracks.TTRHBuilder = "WithoutRefit"
replace hltCtfL1NonIsoStartUpWithMaterialTracks.Fitter = "KFFittingSmoother"
replace hltCtfL1NonIsoStartUpWithMaterialTracks.Propagator = "PropagatorWithMaterial"

# sequence HLTPixelMatchElectronL1NonIsoSequence = {
#     hltL1NonIsoElectronPixelSeeds
# }
