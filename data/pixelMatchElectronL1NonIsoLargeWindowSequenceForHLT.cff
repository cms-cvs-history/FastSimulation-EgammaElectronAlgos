# $Id: pixelMatchElectronL1NonIsoLargeWindowSequenceForHLT.cff,v 1.1 2007/12/17 19:55:16 ghezzi Exp $
# create a sequence with all required modules and sources needed to make
# pixel based electrons
#
# NB: it assumes that ECAL clusters (hybrid) are in the event
#
#

# modules to make seeds, tracks and electrons
include "RecoEgamma/EgammaHLTProducers/data/egammaHLTChi2MeasurementEstimatorESProducer.cff"

# Cluster-seeded pixel pairs
module l1NonIsoLargeWindowElectronPixelSeeds = electronGSPixelSeeds from "FastSimulation/EgammaElectronAlgos/data/electronGSPixelSeeds.cfi"
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.ePhiMin1=-0.035
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.ePhiMax1=0.020
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.pPhiMin1=-0.020
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.pPhiMax1=0.035
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.pPhiMin2=-0.002
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.pPhiMax2=0.002
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.ZMin1=-15.0
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.ZMax1=15.0
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.ZMin2=-0.1
replace l1NonIsoLargeWindowElectronPixelSeeds.SeedConfiguration.ZMax2=0.1

replace l1NonIsoLargeWindowElectronPixelSeeds.superClusterBarrelProducer = "correctedHybridSuperClustersL1NonIsolated"
replace l1NonIsoLargeWindowElectronPixelSeeds.superClusterEndcapProducer = "correctedEndcapSuperClustersWithPreshowerL1NonIsolated"

module ckfL1NonIsoLargeWindowTrackCandidates = trackCandidateProducer from "FastSimulation/Tracking/data/TrackCandidateProducer.cfi"
replace ckfL1NonIsoLargeWindowTrackCandidates.SeedProducer = l1NonIsoLargeWindowElectronPixelSeeds:
replace ckfL1NonIsoLargeWindowTrackCandidates.TrackProducer = ctfL1NonIsoWithMaterialTracks:
replace ckfL1NonIsoLargeWindowTrackCandidates.MaxNumberOfCrossedLayers = 999
replace ckfL1NonIsoLargeWindowTrackCandidates.SeedCleaning = false

# CTF track fit with material
module ctfL1NonIsoLargeWindowTracks = ctfWithMaterialTracks from "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cfi"
replace ctfL1NonIsoLargeWindowTracks.src = "ckfL1NonIsoLargeWindowTrackCandidates"
replace ctfL1NonIsoLargeWindowTracks.TTRHBuilder = "WithoutRefit"

module ctfL1NonIsoLargeWindowWithMaterialTracks = FastTrackMerger {

    VInputTag TrackProducers = { 
	ctfL1NonIsoLargeWindowTracks,
	ctfL1NonIsoWithMaterialTracks
    }

    untracked bool SaveTracksOnly = true

}

# Electron collection
include "RecoEgamma/EgammaHLTProducers/data/pixelMatchElectronsL1NonIsoLargeWindowForHLT.cff"

sequence pixelMatchElectronL1NonIsoLargeWindowSequenceForHLT = {
    l1NonIsoLargeWindowElectronPixelSeeds
}

sequence pixelMatchElectronL1NonIsoLargeWindowTrackingSequenceForHLT = {
    ckfL1NonIsoLargeWindowTrackCandidates &
    ctfL1NonIsoLargeWindowTracks &
    ctfL1NonIsoLargeWindowWithMaterialTracks &
    pixelMatchElectronsL1NonIsoLargeWindowForHLT
}
